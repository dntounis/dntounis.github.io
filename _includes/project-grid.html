<div class="projects-grid">
  {% assign sorted_projects = site.projects | sort: "order" | reverse %}
  
  {% if include.category %}
    <h2>{{ include.category | capitalize }} Projects</h2>
    {% assign filtered_projects = sorted_projects | where: "status", include.category %}
    {% for project in filtered_projects %}
      <div class="project-card">
        {% if project.image %}
          <div class="project-image-container">
            <img src="{{ project.image }}" alt="{{ project.title }}" class="project-image">
          </div>
        {% endif %}
        
        <div class="project-content">
          <h3 class="project-title" onclick="toggleProject(this)">
            {{ project.title }}
            <span class="expand-icon">▼</span>
          </h3>
          
          <p>{{ project.description }}</p>
          
          <div class="project-details" style="display: none;">
            {{ project.content }}
          </div>
          
          <div class="project-tags">
            {% for tag in project.tags %}
              <span class="tag">{{ tag }}</span>
            {% endfor %}
          </div>
          
          <div class="project-links">
            {% if project.demo %}
              <a href="{{ project.demo }}" class="project-link" target="_blank">Demo</a>
            {% endif %}
            
            {% if project.code %}
              <a href="{{ project.code }}" class="project-link" target="_blank">Code</a>
            {% endif %}
            
            {% if project.Paper %}
              <a href="{{ project.Paper }}" class="project-link paper-link" target="_blank">Paper</a>
            {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
  
  {% else %}
    {% assign current_projects = sorted_projects | where: "status", "current" %}
    {% for project in current_projects %}
      <div class="project-card">
        {% if project.image %}
          <div class="project-image-container">
            <img src="{{ project.image }}" alt="{{ project.title }}" class="project-image">
          </div>
        {% endif %}
        
        <div class="project-content">
          <h3 class="project-title" onclick="toggleProject(this)">
            {{ project.title }}
            <span class="expand-icon">▼</span>
          </h3>
          
          <p>{{ project.description }}</p>
          
          <div class="project-details" style="display: none;">
            {{ project.content }}
          </div>
          
          <div class="project-tags">
            {% for tag in project.tags %}
              <span class="tag">{{ tag }}</span>
            {% endfor %}
          </div>
          
          <div class="project-links">
            {% if project.demo %}
              <a href="{{ project.demo }}" class="project-link" target="_blank">Demo</a>
            {% endif %}
            
            {% if project.code %}
              <a href="{{ project.code }}" class="project-link" target="_blank">Code</a>
            {% endif %}
            
            {% if project.Paper %}
              <a href="{{ project.Paper }}" class="project-link paper-link" target="_blank">Paper</a>
            {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}

    {% assign past_projects = sorted_projects | where: "status", "past" %}
    {% for project in past_projects %}
      <div class="project-card">
        {% if project.image %}
          <div class="project-image-container">
            <img src="{{ project.image }}" alt="{{ project.title }}" class="project-image">
          </div>
        {% endif %}
        
        <div class="project-content">
          <h3 class="project-title" onclick="toggleProject(this)">
            {{ project.title }}
            <span class="expand-icon">▼</span>
          </h3>
          
          <p>{{ project.description }}</p>
          
          <div class="project-details" style="display: none;">
            {{ project.content }}
          </div>
          
          <div class="project-tags">
            {% for tag in project.tags %}
              <span class="tag">{{ tag }}</span>
            {% endfor %}
          </div>
          
          <div class="project-links">
            {% if project.demo %}
              <a href="{{ project.demo }}" class="project-link" target="_blank">Demo</a>
            {% endif %}
            
            {% if project.code %}
              <a href="{{ project.code }}" class="project-link" target="_blank">Code</a>
            {% endif %}
            
            {% if project.Paper %}
              <a href="{{ project.Paper }}" class="project-link paper-link" target="_blank">Paper</a>
            {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
  {% endif %}
</div>

